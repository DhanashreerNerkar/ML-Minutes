<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>K-Means Clustering - Complete Coffee Shop Example</title>
    <style>
        * {
            margin: 0;
            padding: 0;
            box-sizing: border-box;
        }

        body {
            font-family: -apple-system, BlinkMacSystemFont, 'Segoe UI', Roboto, Oxygen, Ubuntu, sans-serif;
            background: linear-gradient(135deg, #667eea 0%, #764ba2 100%);
            min-height: 100vh;
            color: #333;
            padding: 20px;
        }

        .container {
            max-width: 1400px;
            margin: 0 auto;
        }

        .header {
            text-align: center;
            padding: 60px 30px;
            background: rgba(255, 255, 255, 0.98);
            border-radius: 30px;
            margin-bottom: 40px;
            box-shadow: 0 30px 60px rgba(0, 0, 0, 0.15);
            position: relative;
            overflow: hidden;
        }

        .header::before {
            content: '';
            position: absolute;
            top: 0;
            left: 0;
            right: 0;
            height: 5px;
            background: linear-gradient(90deg, #8b5cf6, #ec4899, #3b82f6, #10b981);
            animation: shimmer 3s infinite;
        }

        @keyframes shimmer {
            0% { transform: translateX(-100%); }
            100% { transform: translateX(100%); }
        }

        .header h1 {
            font-size: 3em;
            background: linear-gradient(135deg, #8b5cf6 0%, #ec4899 100%);
            -webkit-background-clip: text;
            -webkit-text-fill-color: transparent;
            margin-bottom: 15px;
        }

        .card {
            background: white;
            border-radius: 20px;
            padding: 40px;
            margin-bottom: 30px;
            box-shadow: 0 15px 35px rgba(0, 0, 0, 0.1);
            animation: fadeInUp 0.6s ease;
        }

        .section-title {
            font-size: 2em;
            margin-bottom: 25px;
            color: #1a1a1a;
            display: flex;
            align-items: center;
            gap: 15px;
            border-bottom: 3px solid #8b5cf6;
            padding-bottom: 10px;
        }

        .step-number {
            width: 40px;
            height: 40px;
            background: linear-gradient(135deg, #8b5cf6, #ec4899);
            color: white;
            border-radius: 50%;
            display: flex;
            align-items: center;
            justify-content: center;
            font-weight: bold;
            font-size: 1.2em;
        }

        .data-table {
            width: 100%;
            border-collapse: collapse;
            margin: 20px 0;
            background: white;
            border-radius: 10px;
            overflow: hidden;
            box-shadow: 0 5px 15px rgba(0,0,0,0.1);
        }

        .data-table th {
            background: linear-gradient(135deg, #8b5cf6, #ec4899);
            color: white;
            padding: 15px;
            text-align: left;
            font-weight: 600;
        }

        .data-table td {
            padding: 12px 15px;
            border-bottom: 1px solid #e5e7eb;
        }

        .data-table tr:hover {
            background: #f8f9fa;
        }

        .formula-box {
            background: linear-gradient(135deg, #3b82f6 0%, #8b5cf6 100%);
            color: white;
            border-radius: 15px;
            padding: 25px;
            margin: 20px 0;
            text-align: center;
            font-size: 1.2em;
            font-weight: 600;
        }

        .visual-demo {
            background: linear-gradient(135deg, #f5f7fa 0%, #e9ecef 100%);
            border-radius: 15px;
            padding: 30px;
            margin: 25px 0;
            display: flex;
            justify-content: center;
            align-items: center;
        }

        .code-block {
            background: #1e293b;
            color: #e2e8f0;
            border-radius: 15px;
            padding: 25px;
            margin: 25px 0;
            overflow-x: auto;
            font-family: 'Monaco', 'Courier New', monospace;
            font-size: 0.95em;
            line-height: 1.8;
            position: relative;
        }

        .code-block::before {
            content: 'Python';
            position: absolute;
            top: 10px;
            right: 10px;
            background: rgba(99, 102, 241, 0.2);
            color: #818cf8;
            padding: 4px 12px;
            border-radius: 6px;
            font-size: 0.8em;
        }

        .highlight-box {
            background: linear-gradient(135deg, #fef3c7, #fed7aa);
            border: 2px solid #f59e0b;
            border-radius: 15px;
            padding: 20px;
            margin: 20px 0;
        }

        .success-box {
            background: linear-gradient(135deg, #d4f4dd, #bbf7d0);
            border: 2px solid #22c55e;
            border-radius: 15px;
            padding: 20px;
            margin: 20px 0;
        }

        .cluster-visual {
            display: flex;
            justify-content: space-around;
            align-items: center;
            margin: 30px 0;
            flex-wrap: wrap;
            gap: 20px;
        }

        .cluster-card {
            text-align: center;
            padding: 20px;
            background: white;
            border-radius: 15px;
            box-shadow: 0 5px 15px rgba(0,0,0,0.1);
            min-width: 200px;
            border-top: 4px solid;
        }

        .metric-display {
            display: grid;
            grid-template-columns: repeat(auto-fit, minmax(200px, 1fr));
            gap: 20px;
            margin: 20px 0;
        }

        .metric-card {
            background: white;
            padding: 20px;
            border-radius: 10px;
            box-shadow: 0 3px 10px rgba(0,0,0,0.1);
            text-align: center;
        }

        .metric-value {
            font-size: 2em;
            font-weight: bold;
            margin: 10px 0;
        }

        @keyframes fadeInUp {
            from {
                opacity: 0;
                transform: translateY(20px);
            }
            to {
                opacity: 1;
                transform: translateY(0);
            }
        }
    </style>
</head>
<body>
    <div class="container">
        <div class="header">
            <h1>‚òï K-Means Clustering: Complete Coffee Shop Example</h1>
            <p>Learning Everything Through One Real Example - From K Selection to Convergence</p>
        </div>

        <!-- The Scenario -->
        <div class="card">
            <h2 class="section-title">
                <span class="step-number">üìç</span>
                The Scenario: Coffee Shop Customer Segmentation
            </h2>
            
            <div class="highlight-box">
                <h3>üè™ The Problem:</h3>
                <p style="font-size: 1.1em; line-height: 1.8;">
                    You own a coffee shop and want to understand your customers better for targeted marketing.
                    You've collected data on 12 customers with two simple features:
                </p>
                <ul style="margin: 15px 0 0 30px; line-height: 1.8;">
                    <li><strong>Weekly Visits:</strong> How often they visit per week</li>
                    <li><strong>Average Spend:</strong> How much they spend per visit ($)</li>
                </ul>
            </div>

            <table class="data-table">
                <thead>
                    <tr>
                        <th>Customer ID</th>
                        <th>Weekly Visits</th>
                        <th>Avg Spend ($)</th>
                        <th>Description</th>
                    </tr>
                </thead>
                <tbody>
                    <tr>
                        <td>C1</td>
                        <td>6</td>
                        <td>8</td>
                        <td>Daily regular, small coffee</td>
                    </tr>
                    <tr>
                        <td>C2</td>
                        <td>7</td>
                        <td>7</td>
                        <td>Daily regular, basic order</td>
                    </tr>
                    <tr>
                        <td>C3</td>
                        <td>5</td>
                        <td>9</td>
                        <td>Workday visitor</td>
                    </tr>
                    <tr>
                        <td>C4</td>
                        <td>2</td>
                        <td>20</td>
                        <td>Weekend treats, big orders</td>
                    </tr>
                    <tr>
                        <td>C5</td>
                        <td>1</td>
                        <td>25</td>
                        <td>Special occasions only</td>
                    </tr>
                    <tr>
                        <td>C6</td>
                        <td>2</td>
                        <td>22</td>
                        <td>Weekend brunch</td>
                    </tr>
                    <tr>
                        <td>C7</td>
                        <td>3</td>
                        <td>12</td>
                        <td>Mid-week meetings</td>
                    </tr>
                    <tr>
                        <td>C8</td>
                        <td>4</td>
                        <td>11</td>
                        <td>Regular but moderate</td>
                    </tr>
                    <tr>
                        <td>C9</td>
                        <td>3</td>
                        <td>13</td>
                        <td>Lunch crowd</td>
                    </tr>
                    <tr>
                        <td>C10</td>
                        <td>1</td>
                        <td>23</td>
                        <td>Monthly splurge</td>
                    </tr>
                    <tr>
                        <td>C11</td>
                        <td>6</td>
                        <td>6</td>
                        <td>Daily, just coffee</td>
                    </tr>
                    <tr>
                        <td>C12</td>
                        <td>5</td>
                        <td>8</td>
                        <td>Workday regular</td>
                    </tr>
                </tbody>
            </table>
        </div>

        <!-- Question 1: How to Decide K -->
        <div class="card">
            <h2 class="section-title">
                <span class="step-number">1</span>
                How to Decide on K? (The Number of Clusters)
            </h2>

            <div class="highlight-box">
                <h3>üéØ We'll Use the Elbow Method</h3>
                <p>Calculate the Within-Cluster Sum of Squares (WCSS) for different values of K and look for the "elbow".</p>
            </div>

            <div class="visual-demo">
                <svg width="600" height="400" viewBox="0 0 600 400">
                    <text x="300" y="30" text-anchor="middle" font-size="18" font-weight="bold">Elbow Method: WCSS vs K</text>
                    
                    <!-- Axes -->
                    <line x1="60" y1="350" x2="540" y2="350" stroke="#333" stroke-width="2"/>
                    <line x1="60" y1="350" x2="60" y2="50" stroke="#333" stroke-width="2"/>
                    
                    <!-- Y-axis labels -->
                    <text x="40" y="55" text-anchor="end" font-size="12">500</text>
                    <text x="40" y="155" text-anchor="end" font-size="12">300</text>
                    <text x="40" y="255" text-anchor="end" font-size="12">100</text>
                    <text x="40" y="355" text-anchor="end" font-size="12">0</text>
                    
                    <!-- X-axis labels -->
                    <text x="120" y="370" text-anchor="middle" font-size="12">1</text>
                    <text x="200" y="370" text-anchor="middle" font-size="12">2</text>
                    <text x="280" y="370" text-anchor="middle" font-size="12">3</text>
                    <text x="360" y="370" text-anchor="middle" font-size="12">4</text>
                    <text x="440" y="370" text-anchor="middle" font-size="12">5</text>
                    <text x="520" y="370" text-anchor="middle" font-size="12">6</text>
                    
                    <!-- Data points and line -->
                    <circle cx="120" cy="100" r="6" fill="#3b82f6"/>
                    <circle cx="200" cy="200" r="6" fill="#3b82f6"/>
                    <circle cx="280" cy="280" r="8" fill="#ef4444" stroke="#ef4444" stroke-width="2"/>
                    <circle cx="360" cy="310" r="6" fill="#3b82f6"/>
                    <circle cx="440" cy="330" r="6" fill="#3b82f6"/>
                    <circle cx="520" cy="340" r="6" fill="#3b82f6"/>
                    
                    <!-- Connect points -->
                    <polyline points="120,100 200,200 280,280 360,310 440,330 520,340" 
                             stroke="#8b5cf6" stroke-width="3" fill="none"/>
                    
                    <!-- Elbow annotation -->
                    <circle cx="280" cy="280" r="20" fill="none" stroke="#ef4444" stroke-width="2" stroke-dasharray="5,5"/>
                    <text x="280" y="250" text-anchor="middle" fill="#ef4444" font-weight="bold">ELBOW!</text>
                    <text x="280" y="235" text-anchor="middle" fill="#ef4444" font-size="12">Optimal K=3</text>
                    
                    <!-- Axis labels -->
                    <text x="300" y="395" text-anchor="middle" font-size="14">Number of Clusters (K)</text>
                    <text x="20" y="200" text-anchor="middle" font-size="14" transform="rotate(-90 20 200)">WCSS (Inertia)</text>
                </svg>
            </div>

            <div class="code-block">
# Step 1: Calculate WCSS for different K values
import numpy as np
import matplotlib.pyplot as plt
from sklearn.cluster import KMeans

# Our coffee shop data
customers = np.array([
    [6, 8],  [7, 7],  [5, 9],   # Daily regulars
    [2, 20], [1, 25], [2, 22],  # Weekend/occasional high spenders
    [3, 12], [4, 11], [3, 13],  # Moderate users
    [1, 23], [6, 6],  [5, 8]    # Mixed
])

# Calculate WCSS for K = 1 to 6
wcss = []
K_range = range(1, 7)

for k in K_range:
    kmeans = KMeans(n_clusters=k, random_state=42, n_init=10)
    kmeans.fit(customers)
    wcss.append(kmeans.inertia_)

print("WCSS values for different K:")
for k, w in zip(K_range, wcss):
    print(f"K={k}: WCSS={w:.2f}")

# The elbow appears at K=3
print("\nüéØ Optimal K = 3 (where the curve bends)")
            </div>

            <div class="success-box">
                <h3>‚úÖ Answer: Choose K=3</h3>
                <p>The WCSS drops significantly from K=1 to K=3, then flattens out. This "elbow" at K=3 indicates the optimal number of clusters.</p>
            </div>
        </div>

        <!-- Question 2: Initial Centroids -->
        <div class="card">
            <h2 class="section-title">
                <span class="step-number">2</span>
                Where to Place Initial Centroids?
            </h2>

            <div class="highlight-box">
                <h3>üé≤ Method 1: Random Selection (Basic K-Means)</h3>
                <p>Randomly select K data points as initial centroids.</p>
                
                <h3>üéØ Method 2: K-Means++ (Smart Initialization)</h3>
                <p>Select centroids that are far apart from each other.</p>
            </div>

            <table class="data-table">
                <thead>
                    <tr>
                        <th>Method</th>
                        <th>Step</th>
                        <th>Selected Centroid</th>
                        <th>Location (Visits, Spend)</th>
                    </tr>
                </thead>
                <tbody>
                    <tr>
                        <td rowspan="3"><strong>Random</strong></td>
                        <td>1</td>
                        <td>C2 (random)</td>
                        <td>(7, 7)</td>
                    </tr>
                    <tr>
                        <td>2</td>
                        <td>C5 (random)</td>
                        <td>(1, 25)</td>
                    </tr>
                    <tr>
                        <td>3</td>
                        <td>C8 (random)</td>
                        <td>(4, 11)</td>
                    </tr>
                    <tr style="background: #f0fdf4;">
                        <td rowspan="3"><strong>K-Means++</strong></td>
                        <td>1</td>
                        <td>C2 (random)</td>
                        <td>(7, 7)</td>
                    </tr>
                    <tr style="background: #f0fdf4;">
                        <td>2</td>
                        <td>C5 (farthest from C2)</td>
                        <td>(1, 25)</td>
                    </tr>
                    <tr style="background: #f0fdf4;">
                        <td>3</td>
                        <td>C7 (balanced distance)</td>
                        <td>(3, 12)</td>
                    </tr>
                </tbody>
            </table>

            <div class="code-block">
# K-Means++ Initialization (Simplified)
import numpy as np

def kmeans_plus_plus_init(data, k):
    centroids = []
    
    # Step 1: Choose first centroid randomly
    first_idx = np.random.choice(len(data))
    centroids.append(data[first_idx])
    print(f"Centroid 1: {data[first_idx]} (random)")
    
    # Step 2-K: Choose remaining centroids
    for i in range(1, k):
        # Calculate distances to nearest centroid
        distances = []
        for point in data:
            min_dist = min([np.linalg.norm(point - c) for c in centroids])
            distances.append(min_dist)
        
        # Choose point with probability proportional to distance¬≤
        distances = np.array(distances)
        probabilities = distances**2 / sum(distances**2)
        next_idx = np.random.choice(len(data), p=probabilities)
        
        centroids.append(data[next_idx])
        print(f"Centroid {i+1}: {data[next_idx]} (dist-based)")
    
    return np.array(centroids)

# Initialize centroids
initial_centroids = kmeans_plus_plus_init(customers, k=3)
            </div>
        </div>

        <!-- Question 3: Calculate Centroids -->
        <div class="card">
            <h2 class="section-title">
                <span class="step-number">3</span>
                How to Calculate/Update Centroids?
            </h2>

            <div class="formula-box">
                Centroid = Mean of all points in the cluster
                <br>
                Centroid_new = (Œ£ points_in_cluster) / number_of_points
            </div>

            <div class="highlight-box">
                <h3>üìä Example: First Iteration</h3>
                <p>Let's say after assigning points to nearest centroids, we get:</p>
            </div>

            <div class="cluster-visual">
                <div class="cluster-card" style="border-color: #ec4899;">
                    <h4 style="color: #ec4899;">Cluster 1 (Daily Regulars)</h4>
                    <p>Points: C1(6,8), C2(7,7), C3(5,9), C11(6,6), C12(5,8)</p>
                    <p><strong>Calculation:</strong></p>
                    <p>X = (6+7+5+6+5)/5 = 5.8</p>
                    <p>Y = (8+7+9+6+8)/5 = 7.6</p>
                    <p style="background: #fce7f3; padding: 10px; border-radius: 5px; margin-top: 10px;">
                        <strong>New Centroid: (5.8, 7.6)</strong>
                    </p>
                </div>
                
                <div class="cluster-card" style="border-color: #8b5cf6;">
                    <h4 style="color: #8b5cf6;">Cluster 2 (Big Spenders)</h4>
                    <p>Points: C4(2,20), C5(1,25), C6(2,22), C10(1,23)</p>
                    <p><strong>Calculation:</strong></p>
                    <p>X = (2+1+2+1)/4 = 1.5</p>
                    <p>Y = (20+25+22+23)/4 = 22.5</p>
                    <p style="background: #ede9fe; padding: 10px; border-radius: 5px; margin-top: 10px;">
                        <strong>New Centroid: (1.5, 22.5)</strong>
                    </p>
                </div>
                
                <div class="cluster-card" style="border-color: #3b82f6;">
                    <h4 style="color: #3b82f6;">Cluster 3 (Moderate)</h4>
                    <p>Points: C7(3,12), C8(4,11), C9(3,13)</p>
                    <p><strong>Calculation:</strong></p>
                    <p>X = (3+4+3)/3 = 3.33</p>
                    <p>Y = (12+11+13)/3 = 12</p>
                    <p style="background: #dbeafe; padding: 10px; border-radius: 5px; margin-top: 10px;">
                        <strong>New Centroid: (3.33, 12)</strong>
                    </p>
                </div>
            </div>

            <div class="code-block">
# Function to update centroids
def update_centroids(data, labels, k):
    new_centroids = []
    
    for cluster_id in range(k):
        # Get all points in this cluster
        cluster_points = data[labels == cluster_id]
        
        if len(cluster_points) > 0:
            # Calculate mean (new centroid)
            new_centroid = np.mean(cluster_points, axis=0)
            new_centroids.append(new_centroid)
            
            print(f"Cluster {cluster_id + 1}:")
            print(f"  Points: {len(cluster_points)}")
            print(f"  New centroid: ({new_centroid[0]:.2f}, {new_centroid[1]:.2f})")
    
    return np.array(new_centroids)

# Example usage
labels = np.array([0, 0, 0, 1, 1, 1, 2, 2, 2, 1, 0, 0])  # Cluster assignments
new_centroids = update_centroids(customers, labels, k=3)
            </div>
        </div>

        <!-- Question 4: Convergence -->
        <div class="card">
            <h2 class="section-title">
                <span class="step-number">4</span>
                How to Check Convergence? (When to Stop)
            </h2>

            <div class="highlight-box">
                <h3>üîÑ Convergence Criteria:</h3>
                <ol style="margin-left: 30px; line-height: 2;">
                    <li><strong>Centroids don't move</strong> (or move less than threshold, e.g., 0.001)</li>
                    <li><strong>Assignments don't change</strong> (no points switch clusters)</li>
                    <li><strong>Maximum iterations reached</strong> (e.g., 100 iterations)</li>
                    <li><strong>WCSS decrease is minimal</strong> (< 1% improvement)</li>
                </ol>
            </div>

            <table class="data-table">
                <thead>
                    <tr>
                        <th>Iteration</th>
                        <th>Centroid Movement</th>
                        <th>Points Reassigned</th>
                        <th>WCSS</th>
                        <th>Status</th>
                    </tr>
                </thead>
                <tbody>
                    <tr>
                        <td>1</td>
                        <td>5.23</td>
                        <td>12 (all)</td>
                        <td>145.6</td>
                        <td>üîÑ Continue</td>
                    </tr>
                    <tr>
                        <td>2</td>
                        <td>2.15</td>
                        <td>3</td>
                        <td>98.3</td>
                        <td>üîÑ Continue</td>
                    </tr>
                    <tr>
                        <td>3</td>
                        <td>0.87</td>
                        <td>1</td>
                        <td>82.1</td>
                        <td>üîÑ Continue</td>
                    </tr>
                    <tr>
                        <td>4</td>
                        <td>0.12</td>
                        <td>0</td>
                        <td>78.5</td>
                        <td>üîÑ Continue</td>
                    </tr>
                    <tr style="background: #d4f4dd;">
                        <td>5</td>
                        <td>0.00</td>
                        <td>0</td>
                        <td>78.5</td>
                        <td>‚úÖ CONVERGED!</td>
                    </tr>
                </tbody>
            </table>

            <div class="code-block">
# Complete K-Means Implementation with Convergence Check
class KMeansCoffeeShop:
    def __init__(self, n_clusters=3, max_iters=100, tolerance=0.001):
        self.k = n_clusters
        self.max_iters = max_iters
        self.tolerance = tolerance
        
    def fit(self, X):
        # Initialize centroids
        idx = np.random.choice(len(X), self.k, replace=False)
        self.centroids = X[idx].copy()
        
        print("Starting K-Means Clustering...")
        print("="*50)
        
        for iteration in range(self.max_iters):
            old_centroids = self.centroids.copy()
            
            # Step 1: Assign points to nearest centroid
            distances = self._calculate_distances(X)
            self.labels = np.argmin(distances, axis=1)
            
            # Step 2: Update centroids
            for i in range(self.k):
                cluster_points = X[self.labels == i]
                if len(cluster_points) > 0:
                    self.centroids[i] = np.mean(cluster_points, axis=0)
            
            # Step 3: Check convergence
            centroid_movement = np.linalg.norm(self.centroids - old_centroids)
            
            # Calculate WCSS
            wcss = self._calculate_wcss(X)
            
            print(f"Iteration {iteration + 1}:")
            print(f"  Centroid movement: {centroid_movement:.4f}")
            print(f"  WCSS: {wcss:.2f}")
            
            # Convergence criteria
            if centroid_movement < self.tolerance:
                print(f"\n‚úÖ CONVERGED at iteration {iteration + 1}!")
                print(f"   Reason: Centroids moved less than {self.tolerance}")
                break
                
        return self
    
    def _calculate_distances(self, X):
        distances = np.zeros((len(X), self.k))
        for i, centroid in enumerate(self.centroids):
            distances[:, i] = np.linalg.norm(X - centroid, axis=1)
        return distances
    
    def _calculate_wcss(self, X):
        wcss = 0
        for i in range(self.k):
            cluster_points = X[self.labels == i]
            if len(cluster_points) > 0:
                wcss += np.sum((cluster_points - self.centroids[i])**2)
        return wcss

# Run the complete algorithm
kmeans = KMeansCoffeeShop(n_clusters=3, tolerance=0.001)
kmeans.fit(customers)

# Final results
print("\n" + "="*50)
print("FINAL CLUSTERS:")
print("="*50)
for i in range(3):
    cluster_customers = customers[kmeans.labels == i]
    print(f"\nCluster {i+1} ({len(cluster_customers)} customers):")
    print(f"  Centroid: ({kmeans.centroids[i][0]:.2f}, {kmeans.centroids[i][1]:.2f})")
    print(f"  Characteristics:")
    if i == 0:
        print("    ‚Üí Daily Regulars (High frequency, Low spend)")
    elif i == 1:
        print("    ‚Üí Premium Customers (Low frequency, High spend)")
    else:
        print("    ‚Üí Moderate Users (Medium frequency, Medium spend)")
            </div>
        </div>

        <!-- Complete Example -->
        <div class="card">
            <h2 class="section-title">
                <span class="step-number">5</span>
                Complete Step-by-Step Example
            </h2>

            <div class="visual-demo">
                <svg width="700" height="500" viewBox="0 0 700 500">
                    <text x="350" y="25" text-anchor="middle" font-size="18" font-weight="bold">
                        Complete K-Means Process for Coffee Shop
                    </text>
                    
                    <!-- Step 1: Raw Data -->
                    <g transform="translate(50, 50)">
                        <text x="100" y="0" text-anchor="middle" font-weight="bold">Step 1: Raw Data</text>
                        <rect x="20" y="10" width="160" height="150" fill="#f8f9fa" stroke="#ddd"/>
                        
                        <!-- Plot points -->
                        <circle cx="140" cy="50" r="4" fill="#6b7280"/> <!-- C1: 6,8 -->
                        <circle cx="160" cy="45" r="4" fill="#6b7280"/> <!-- C2: 7,7 -->
                        <circle cx="120" cy="55" r="4" fill="#6b7280"/> <!-- C3: 5,9 -->
                        <circle cx="60" cy="110" r="4" fill="#6b7280"/>  <!-- C4: 2,20 -->
                        <circle cx="40" cy="130" r="4" fill="#6b7280"/>  <!-- C5: 1,25 -->
                        <circle cx="60" cy="120" r="4" fill="#6b7280"/>  <!-- C6: 2,22 -->
                        <circle cx="80" cy="80" r="4" fill="#6b7280"/>   <!-- C7: 3,12 -->
                        <circle cx="100" cy="75" r="4" fill="#6b7280"/>  <!-- C8: 4,11 -->
                        <circle cx="80" cy="85" r="4" fill="#6b7280"/>   <!-- C9: 3,13 -->
                        <circle cx="40" cy="125" r="4" fill="#6b7280"/>  <!-- C10: 1,23 -->
                        <circle cx="140" cy="40" r="4" fill="#6b7280"/>  <!-- C11: 6,6 -->
                        <circle cx="120" cy="50" r="4" fill="#6b7280"/>  <!-- C12: 5,8 -->
                    </g>
                    
                    <!-- Step 2: Initialize -->
                    <g transform="translate(250, 50)">
                        <text x="100" y="0" text-anchor="middle" font-weight="bold">Step 2: Initialize K=3</text>
                        <rect x="20" y="10" width="160" height="150" fill="#f8f9fa" stroke="#ddd"/>
                        
                        <!-- Centroids -->
                        <circle cx="140" cy="45" r="8" fill="#000" stroke="#ec4899" stroke-width="2"/>
                        <circle cx="40" cy="130" r="8" fill="#000" stroke="#8b5cf6" stroke-width="2"/>
                        <circle cx="80" cy="80" r="8" fill="#000" stroke="#3b82f6" stroke-width="2"/>
                        
                        <!-- Points (gray) -->
                        <circle cx="140" cy="50" r="4" fill="#9ca3af"/>
                        <circle cx="160" cy="45" r="4" fill="#9ca3af"/>
                        <!-- ... other points ... -->
                    </g>
                    
                    <!-- Step 3: Assign -->
                    <g transform="translate(450, 50)">
                        <text x="100" y="0" text-anchor="middle" font-weight="bold">Step 3: Assign</text>
                        <rect x="20" y="10" width="160" height="150" fill="#f8f9fa" stroke="#ddd"/>
                        
                        <!-- Colored clusters -->
                        <circle cx="140" cy="50" r="4" fill="#ec4899"/>
                        <circle cx="160" cy="45" r="4" fill="#ec4899"/>
                        <circle cx="120" cy="55" r="4" fill="#ec4899"/>
                        <circle cx="60" cy="110" r="4" fill="#8b5cf6"/>
                        <circle cx="40" cy="130" r="4" fill="#8b5cf6"/>
                        <circle cx="60" cy="120" r="4" fill="#8b5cf6"/>
                        <circle cx="80" cy="80" r="4" fill="#3b82f6"/>
                        <circle cx="100" cy="75" r="4" fill="#3b82f6"/>
                        <circle cx="80" cy="85" r="4" fill="#3b82f6"/>
                        <circle cx="40" cy="125" r="4" fill="#8b5cf6"/>
                        <circle cx="140" cy="40" r="4" fill="#ec4899"/>
                        <circle cx="120" cy="50" r="4" fill="#ec4899"/>
                        
                        <!-- Current centroids -->
                        <circle cx="140" cy="45" r="8" fill="#000" stroke="#ec4899" stroke-width="2"/>
                        <circle cx="40" cy="130" r="8" fill="#000" stroke="#8b5cf6" stroke-width="2"/>
                        <circle cx="80" cy="80" r="8" fill="#000" stroke="#3b82f6" stroke-width="2"/>
                    </g>
                    
                    <!-- Step 4: Update & Converge -->
                    <g transform="translate(250, 250)">
                        <text x="100" y="0" text-anchor="middle" font-weight="bold">Step 4: Converged!</text>
                        <rect x="20" y="10" width="160" height="150" fill="#d4f4dd" stroke="#22c55e" stroke-width="2"/>
                        
                        <!-- Final clusters -->
                        <circle cx="140" cy="50" r="4" fill="#ec4899"/>
                        <circle cx="160" cy="45" r="4" fill="#ec4899"/>
                        <circle cx="120" cy="55" r="4" fill="#ec4899"/>
                        <circle cx="60" cy="110" r="4" fill="#8b5cf6"/>
                        <circle cx="40" cy="130" r="4" fill="#8b5cf6"/>
                        <circle cx="60" cy="120" r="4" fill="#8b5cf6"/>
                        <circle cx="80" cy="80" r="4" fill="#3b82f6"/>
                        <circle cx="100" cy="75" r="4" fill="#3b82f6"/>
                        <circle cx="80" cy="85" r="4" fill="#3b82f6"/>
                        <circle cx="40" cy="125" r="4" fill="#8b5cf6"/>
                        <circle cx="140" cy="40" r="4" fill="#ec4899"/>
                        <circle cx="120" cy="50" r="4" fill="#ec4899"/>
                        
                        <!-- Final centroids -->
                        <circle cx="136" cy="48" r="8" fill="#000" stroke="#ec4899" stroke-width="2"/>
                        <circle cx="50" cy="122" r="8" fill="#000" stroke="#8b5cf6" stroke-width="2"/>
                        <circle cx="87" cy="80" r="8" fill="#000" stroke="#3b82f6" stroke-width="2"/>
                        
                        <text x="100" y="180" text-anchor="middle" fill="#22c55e" font-weight="bold">‚úì No movement!</text>
                    </g>
                </svg>
            </div>

            <div class="metric-display">
                <div class="metric-card">
                    <h4>Iterations to Converge</h4>
                    <div class="metric-value" style="color: #10b981;">5</div>
                </div>
                <div class="metric-card">
                    <h4>Final WCSS</h4>
                    <div class="metric-value" style="color: #3b82f6;">78.5</div>
                </div>
                <div class="metric-card">
                    <h4>Number of Clusters</h4>
                    <div class="metric-value" style="color: #8b5cf6;">3</div>
                </div>
            </div>
        </div>

        <!-- Final Summary -->
        <div class="card">
            <h2 class="section-title">
                <span class="step-number">‚úÖ</span>
                Summary: All Your Questions Answered
            </h2>

            <div class="success-box">
                <h3>üéØ Complete K-Means Process for Coffee Shop:</h3>
                <ol style="margin-left: 30px; line-height: 2.5; font-size: 1.1em;">
                    <li><strong>How to decide K?</strong>
                        <br>‚Üí Used Elbow Method: WCSS dropped sharply until K=3, then flattened
                    </li>
                    <li><strong>Where to place initial centroids?</strong>
                        <br>‚Üí K-Means++: First random, then probabilistically far apart
                    </li>
                    <li><strong>How to calculate centroids?</strong>
                        <br>‚Üí Mean of all points in cluster: Centroid = Œ£(points) / count
                    </li>
                    <li><strong>How to check convergence?</strong>
                        <br>‚Üí Centroids stopped moving (movement < 0.001)
                    </li>
                    <li><strong>When to stop clustering?</strong>
                        <br>‚Üí After 5 iterations when no points changed clusters
                    </li>
                </ol>
            </div>

            <div class="cluster-visual">
                <div class="cluster-card" style="border-color: #ec4899;">
                    <h3 style="color: #ec4899;">üì± Cluster 1: Daily Regulars</h3>
                    <p><strong>5 customers</strong></p>
                    <p>6 visits/week, $7.60 average</p>
                    <p style="margin-top: 10px; font-style: italic;">
                        Marketing: Loyalty program, bulk discounts
                    </p>
                </div>
                
                <div class="cluster-card" style="border-color: #8b5cf6;">
                    <h3 style="color: #8b5cf6;">üíé Cluster 2: Premium</h3>
                    <p><strong>4 customers</strong></p>
                    <p>1.5 visits/week, $22.50 average</p>
                    <p style="margin-top: 10px; font-style: italic;">
                        Marketing: Exclusive events, premium products
                    </p>
                </div>
                
                <div class="cluster-card" style="border-color: #3b82f6;">
                    <h3 style="color: #3b82f6;">‚òï Cluster 3: Moderate</h3>
                    <p><strong>3 customers</strong></p>
                    <p>3.3 visits/week, $12 average</p>
                    <p style="margin-top: 10px; font-style: italic;">
                        Marketing: Weekday specials, combo deals
                    </p>
                </div>
            </div>

            <div class="highlight-box">
                <h3>üìä Key Insights from Our Coffee Shop Clustering:</h3>
                <ul style="margin-left: 30px; line-height: 2;">
                    <li>Algorithm converged in just 5 iterations</li>
                    <li>Three distinct customer segments emerged naturally</li>
                    <li>Each segment needs different marketing strategies</li>
                    <li>The elbow method correctly identified K=3</li>
                    <li>K-Means++ initialization led to stable, meaningful clusters</li>
                </ul>
            </div>
        </div>

    </div>
</body>
</html>
